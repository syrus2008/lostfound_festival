{% extends "base.html" %}
{% block content %}
  <h2 class="mb-4">Modifier l'objet : {{ item.title }}</h2>
  <form method="post" enctype="multipart/form-data">
    {{ form.hidden_tag() }}
    <div class="mb-3">
      {{ form.title.label(class="form-label") }}
      {{ form.title(class="form-control") }}
    </div>
    <div class="mb-3">
      {{ form.comments.label(class="form-label") }}
      {{ form.comments(class="form-control", rows="3") }}
    </div>
    <div class="mb-3">
      {{ form.location.label(class="form-label") }}
      {{ form.location(class="form-control") }}
    </div>
    <div class="mb-3">
      {{ form.category.label(class="form-label") }}
      {{ form.category(class="form-select") }}
    </div>
    <div class="mb-3">
      {{ form.reporter_name.label(class="form-label") }}
      {{ form.reporter_name(class="form-control") }}
    </div>
    <div class="mb-3">
      {{ form.reporter_email.label(class="form-label") }}
      {{ form.reporter_email(class="form-control") }}
    </div>
    <div class="mb-3">
      {{ form.reporter_phone.label(class="form-label") }}
      {{ form.reporter_phone(class="form-control") }}
    </div>
    <div class="mb-3">
      {{ form.photos.label(class="form-label") }}
      {{ form.photos(class="form-control", accept="image/*", capture="environment", multiple=True) }}
      {% if item.photos and item.photos|length > 0 %}
        <div class="mb-2">Photos actuelles :
          <div class="d-flex flex-wrap gap-2">
            {% for photo in item.photos %}
              <img src="{{ url_for('main.uploaded_file', filename=photo.filename) }}" class="img-thumbnail" style="max-width: 120px; max-height: 120px;" alt="Photo">
            {% endfor %}
          </div>
        </div>
      {% endif %}
      <div class="form-text">Formats autorisés : jpg, jpeg, png. Max 30 Mo.</div>
    </div>
    <button type="submit" class="btn btn-success">Enregistrer</button>
  </form>
{% endblock %}
